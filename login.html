<!DOCTYPE html>
<html>
<head>
<title>Login</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="login-box">
    <h2>User Login</h2>

    <input id="email" type="text" placeholder="Email">
    <input id="password" type="password" placeholder="Password">

    <button onclick="login()">Login</button>
</div>

<!-- Supabase Library -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>


<!-- Your Supabase Config -->
<script>
const supabase = supabase.createClient(
    "https://xzatttpouvlhqzbuwgmc.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6YXR0dHBvdXZsaHF6YnV3Z21jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MDIyMDQsImV4cCI6MjA3OTk3ODIwNH0.b_21iJwV6QrZ87xEVCxZxhwYGqvhBHMbm-W9Chu9RnE"
);
</script>

<!-- FIXED LOGIN FUNCTION -->
<script>
async function login() {
    const email = document.getElementById("email").value;
    const pass = document.getElementById("password").value;

    // Try login using Supabase
    const { data, error } = await supabase.auth.signInWithPassword({
        email: email,
        password: pass
    });

    console.log("DATA:", data);
    console.log("ERROR:", error);

    // ❌ If login fails — STOP HERE
    if (error || !data || !data.user) {
        alert("Incorrect email or password!");
        return;
    }

    // ✔ Successful login
    window.location.href = "user.html";
}
</script>

</body>
</html>




